<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PEAC Asztalitenisz Foglal√°s</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    .header { background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%); }
    .table-btn { 
      padding: 12px; 
      border: 2px solid #d1d5db; 
      border-radius: 8px; 
      font-weight: 600; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .table-btn:hover { background: #f3f4f6; }
    .table-btn.selected { 
      background: #22c55e; 
      color: white; 
      border-color: #22c55e;
    }
  </style>
</head>
<body class="bg-gray-100">
  <!-- HEADER -->
  <header class="header text-white p-8 shadow-lg">
    <div class="max-w-6xl mx-auto">
      <h1 class="text-4xl font-bold">üèì PEAC Asztalitenisz</h1>
      <p class="text-blue-100 mt-1">P√©csi Egyetemi Atl√©tikai Club - Foglal√°si Rendszer</p>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto p-6">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- ASZTALOK -->
      <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">üìç Asztalok Kiv√°laszt√°sa</h2>
        <div class="grid grid-cols-2 gap-3" id="tables-grid">
          <!-- Asztalok itt lesznek -->
        </div>
      </div>

      <!-- FOGLAL√ÅSI FORMA -->
      <div class="lg:col-span-2 bg-white p-8 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-6">üìÖ Foglal√°s Kit√∂lt√©se</h2>
        
        <form id="booking-form" class="space-y-5">
          
          <!-- N√âV -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">Teljes N√©v *</label>
            <input 
              type="text" 
              id="name" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
              placeholder="pl. Kiss J√°nos"
              required
            >
          </div>

          <!-- EMAIL -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">E-mail C√≠m *</label>
            <input 
              type="email" 
              id="email" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
              placeholder="pl. kiss.janos@example.com"
              required
            >
          </div>

          <!-- D√ÅTUM √âS ID≈ê -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">D√°tum √©s Kezd√©si Id≈ë *</label>
            <input 
              type="datetime-local" 
              id="start-time" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              required
            >
          </div>

          <!-- √ìRA SZ√ÅM -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">Foglal√°s Hossza: <span class="text-blue-600" id="hours-display">1</span> √≥ra</label>
            <input 
              type="range" 
              id="hours" 
              min="1" 
              max="4" 
              value="1" 
              class="w-full cursor-pointer"
            >
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>1 √≥ra</span>
              <span>4 √≥ra</span>
            </div>
          </div>

          <!-- EDZ≈ê -->
          <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
            <label class="flex items-center gap-3 cursor-pointer">
              <input type="checkbox" id="with-coach" class="w-5 h-5 text-blue-600 cursor-pointer">
              <div>
                <span class="font-semibold text-gray-900">üèÖ Edz≈ëvel j√°tszom</span>
                <p class="text-sm text-gray-600">+3000 Ft/√≥ra</p>
              </div>
            </label>
          </div>

          <!-- √úT≈êK -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">üéæ √út≈ë B√©rl√©s</label>
            <select 
              id="rackets" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
              <option value="0">Nincs √ºt≈ë (0 Ft)</option>
              <option value="1">1 √ºt≈ë (+500 Ft)</option>
              <option value="2">2 √ºt≈ë (+1000 Ft)</option>
              <option value="3">3 √ºt≈ë (+1500 Ft)</option>
              <option value="4">4 √ºt≈ë (+2000 Ft)</option>
            </select>
          </div>

          <!-- MEGJEGYZ√âS -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">Megjegyz√©s (opcion√°lis)</label>
            <textarea 
              id="notes" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
              placeholder="pl. Csoportos foglal√°s, speci√°lis ig√©nyek, stb."
              rows="3"
            ></textarea>
          </div>

          <!-- √ÅR √ñSSZESEN -->
          <div class="bg-gradient-to-r from-blue-100 to-blue-50 p-6 rounded-lg border-2 border-blue-300">
            <p class="text-sm text-gray-700 mb-1">V√©g√∂sszesen Fizetend≈ë:</p>
            <p class="text-4xl font-bold text-blue-900" id="total-price">2000 Ft</p>
            <p class="text-xs text-gray-600 mt-2">* Alap √°r: 2000 Ft/√≥ra</p>
          </div>

          <!-- FOGLAL√ÅS GOMB -->
          <button 
            type="submit" 
            id="submit-btn"
            class="w-full bg-green-600 hover:bg-green-700 active:bg-green-800 text-white font-bold py-4 rounded-lg transition shadow-md hover:shadow-lg text-lg"
          >
            ‚úÖ FOGLAL√ÅS MEGER≈êS√çT√âSE
          </button>

          <!-- √úZENET -->
          <div id="message" class="hidden p-4 rounded-lg text-center font-semibold"></div>
        </form>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-gray-800 text-white p-6 mt-12 text-center">
    <p>&copy; 2026 PEAC PTE Asztalitenisz Szakcsoport</p>
    <p class="text-gray-400 mt-2">P√©cs, Baranya, Hungary | teremfoglalo.pte.hu</p>
  </footer>

  <script>
    // ADATOK
    const PRICES = {
      BASE: 2000,      // Ft/√≥ra
      COACH: 3000,     // Ft/√≥ra extra
      RACKET: 500      // Ft per √ºt≈ë
    };

    let selectedTable = null;

    // ASZTALOK INICIALIZ√ÅL√ÅSA
    function initTables() {
      const grid = document.getElementById('tables-grid');
      for (let i = 1; i <= 8; i++) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'table-btn';
        btn.textContent = `Asztal ${i}`;
        btn.dataset.tableId = i;
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          selectTable(i, btn);
        });
        grid.appendChild(btn);
      }
    }

    // ASZTAL KIV√ÅLASZT√ÅS
    function selectTable(id, btn) {
      // El≈ëz≈ë kijel√∂l√©s elt√°vol√≠t√°sa
      document.querySelectorAll('.table-btn').forEach(b => {
        b.classList.remove('selected');
      });
      
      // √öj kijel√∂l√©s
      selectedTable = id;
      btn.classList.add('selected');
      console.log(`Asztal ${id} kiv√°lasztva`);
    }

    // √ÅR SZ√ÅM√çT√ÅS
    function calculatePrice() {
      const hours = parseInt(document.getElementById('hours').value) || 1;
      const withCoach = document.getElementById('with-coach').checked;
      const rackets = parseInt(document.getElementById('rackets').value) || 0;

      let total = PRICES.BASE * hours;
      if (withCoach) total += PRICES.COACH * hours;
      total += PRICES.RACKET * rackets;

      return total;
    }

    // √ÅR FRISS√çT√âS
    function updatePrice() {
      const price = calculatePrice();
      document.getElementById('total-price').textContent = `${price.toLocaleString('hu-HU')} Ft`;
    }

    // ESEM√âNYLEFIGYEL≈êK
    document.getElementById('hours').addEventListener('input', (e) => {
      document.getElementById('hours-display').textContent = e.target.value;
      updatePrice();
    });

    document.getElementById('with-coach').addEventListener('change', updatePrice);
    document.getElementById('rackets').addEventListener('change', updatePrice);

    // FOGLAL√ÅS K√úLD√âSE
    document.getElementById('booking-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const startTime = document.getElementById('start-time').value;
      const hours = parseInt(document.getElementById('hours').value);
      const withCoach = document.getElementById('with-coach').checked;
      const rackets = parseInt(document.getElementById('rackets').value);
      const notes = document.getElementById('notes').value;
      const totalPrice = calculatePrice();

      // VALID√ÅCI√ì
      if (!selectedTable) {
        showMessage('‚ùå K√©rlek v√°lassz egy asztalt!', 'error');
        return;
      }

      if (!startTime) {
        showMessage('‚ùå K√©rlek v√°lassz d√°tumot √©s id≈ët!', 'error');
        return;
      }

      // ADATOK NAPL√ìZ√ÅSA (MAJD SUPABASE-BE MEGY)
      const bookingData = {
        table_id: selectedTable,
        name,
        email,
        start_time: startTime,
        duration_hours: hours,
        with_coach: withCoach,
        racket_count: rackets,
        notes,
        total_price: totalPrice,
        created_at: new Date().toISOString()
      };

      console.log('üìù FOGLAL√ÅS ADATOK:', bookingData);

      // SIKER √úZENET
      showMessage(`‚úÖ Foglal√°s sikeres!\n\n√ñsszeg: ${totalPrice.toLocaleString('hu-HU')} Ft\nVisszaigazol√°s √©rkezik az e-mailre: ${email}`, 'success');

      // FORM RESETEL√âS
      setTimeout(() => {
        document.getElementById('booking-form').reset();
        selectedTable = null;
        document.querySelectorAll('.table-btn').forEach(b => {
          b.classList.remove('selected');
        });
        updatePrice();
      }, 2000);
    });

    // √úZENET MEGJELEN√çT√âS
    function showMessage(text, type) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = type === 'success' 
        ? 'bg-green-100 text-green-900 border border-green-300' 
        : 'bg-red-100 text-red-900 border border-red-300';
      msg.classList.remove('hidden');
      
      if (type === 'success') {
        setTimeout(() => msg.classList.add('hidden'), 5000);
      }
    }

    // INIT
    initTables();
    updatePrice();

    console.log('üéâ PEAC Asztalitenisz Foglal√°si Rendszer - Bet√∂ltve!');
  </script>
</body>
</html>
<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PEAC Asztalitenisz Foglal√°s</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    .header { background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%); }
    .table-btn { 
      padding: 12px; 
      border: 2px solid #d1d5db; 
      border-radius: 8px; 
      font-weight: 600; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .table-btn:hover { background: #f3f4f6; }
    .table-btn.selected { 
      background: #22c55e; 
      color: white; 
      border-color: #22c55e;
    }
  </style>
</head>
<body class="bg-gray-100">
  <!-- HEADER -->
  <header class="header text-white p-8 shadow-lg">
    <div class="max-w-6xl mx-auto">
      <h1 class="text-4xl font-bold">üèì PEAC Asztalitenisz</h1>
      <p class="text-blue-100 mt-1">P√©csi Egyetemi Atl√©tikai Club - Foglal√°si Rendszer</p>
    </div>
  </header>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto p-6">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- ASZTALOK -->
      <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-4">üìç Asztalok Kiv√°laszt√°sa</h2>
        <div class="grid grid-cols-2 gap-3" id="tables-grid">
          <!-- Asztalok itt lesznek -->
        </div>
      </div>

      <!-- FOGLAL√ÅSI FORMA -->
      <div class="lg:col-span-2 bg-white p-8 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-6">üìÖ Foglal√°s Kit√∂lt√©se</h2>
        
        <form id="booking-form" class="space-y-5">
          
          <!-- N√âV -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">Teljes N√©v *</label>
            <input 
              type="text" 
              id="name" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
              placeholder="pl. Kiss J√°nos"
              required
            >
          </div>

          <!-- EMAIL -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">E-mail C√≠m *</label>
            <input 
              type="email" 
              id="email" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
              placeholder="pl. kiss.janos@example.com"
              required
            >
          </div>

          <!-- D√ÅTUM √âS ID≈ê -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">D√°tum √©s Kezd√©si Id≈ë *</label>
            <input 
              type="datetime-local" 
              id="start-time" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              required
            >
          </div>

          <!-- √ìRA SZ√ÅM -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">Foglal√°s Hossza: <span class="text-blue-600" id="hours-display">1</span> √≥ra</label>
            <input 
              type="range" 
              id="hours" 
              min="1" 
              max="4" 
              value="1" 
              class="w-full cursor-pointer"
            >
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>1 √≥ra</span>
              <span>4 √≥ra</span>
            </div>
          </div>

          <!-- EDZ≈ê -->
          <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
            <label class="flex items-center gap-3 cursor-pointer">
              <input type="checkbox" id="with-coach" class="w-5 h-5 text-blue-600 cursor-pointer">
              <div>
                <span class="font-semibold text-gray-900">üèÖ Edz≈ëvel j√°tszom</span>
                <p class="text-sm text-gray-600">+3000 Ft/√≥ra</p>
              </div>
            </label>
          </div>

          <!-- √úT≈êK -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">üéæ √út≈ë B√©rl√©s</label>
            <select 
              id="rackets" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            >
              <option value="0">Nincs √ºt≈ë (0 Ft)</option>
              <option value="1">1 √ºt≈ë (+500 Ft)</option>
              <option value="2">2 √ºt≈ë (+1000 Ft)</option>
              <option value="3">3 √ºt≈ë (+1500 Ft)</option>
              <option value="4">4 √ºt≈ë (+2000 Ft)</option>
            </select>
          </div>

          <!-- MEGJEGYZ√âS -->
          <div>
            <label class="block font-semibold text-gray-700 mb-2">Megjegyz√©s (opcion√°lis)</label>
            <textarea 
              id="notes" 
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
              placeholder="pl. Csoportos foglal√°s, speci√°lis ig√©nyek, stb."
              rows="3"
            ></textarea>
          </div>

          <!-- √ÅR √ñSSZESEN -->
          <div class="bg-gradient-to-r from-blue-100 to-blue-50 p-6 rounded-lg border-2 border-blue-300">
            <p class="text-sm text-gray-700 mb-1">V√©g√∂sszesen Fizetend≈ë:</p>
            <p class="text-4xl font-bold text-blue-900" id="total-price">2000 Ft</p>
            <p class="text-xs text-gray-600 mt-2">* Alap √°r: 2000 Ft/√≥ra</p>
          </div>

          <!-- FOGLAL√ÅS GOMB -->
          <button 
            type="submit" 
            id="submit-btn"
            class="w-full bg-green-600 hover:bg-green-700 active:bg-green-800 text-white font-bold py-4 rounded-lg transition shadow-md hover:shadow-lg text-lg"
          >
            ‚úÖ FOGLAL√ÅS MEGER≈êS√çT√âSE
          </button>

          <!-- √úZENET -->
          <div id="message" class="hidden p-4 rounded-lg text-center font-semibold"></div>
        </form>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-gray-800 text-white p-6 mt-12 text-center">
    <p>&copy; 2026 PEAC PTE Asztalitenisz Szakcsoport</p>
    <p class="text-gray-400 mt-2">P√©cs, Baranya, Hungary | teremfoglalo.pte.hu</p>
  </footer>

  <script>
    // ADATOK
    const PRICES = {
      BASE: 2000,      // Ft/√≥ra
      COACH: 3000,     // Ft/√≥ra extra
      RACKET: 500      // Ft per √ºt≈ë
    };

    let selectedTable = null;

    // ASZTALOK INICIALIZ√ÅL√ÅSA
    function initTables() {
      const grid = document.getElementById('tables-grid');
      for (let i = 1; i <= 8; i++) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'table-btn';
        btn.textContent = `Asztal ${i}`;
        btn.dataset.tableId = i;
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          selectTable(i, btn);
        });
        grid.appendChild(btn);
      }
    }

    // ASZTAL KIV√ÅLASZT√ÅS
    function selectTable(id, btn) {
      // El≈ëz≈ë kijel√∂l√©s elt√°vol√≠t√°sa
      document.querySelectorAll('.table-btn').forEach(b => {
        b.classList.remove('selected');
      });
      
      // √öj kijel√∂l√©s
      selectedTable = id;
      btn.classList.add('selected');
      console.log(`Asztal ${id} kiv√°lasztva`);
    }

    // √ÅR SZ√ÅM√çT√ÅS
    function calculatePrice() {
      const hours = parseInt(document.getElementById('hours').value) || 1;
      const withCoach = document.getElementById('with-coach').checked;
      const rackets = parseInt(document.getElementById('rackets').value) || 0;

      let total = PRICES.BASE * hours;
      if (withCoach) total += PRICES.COACH * hours;
      total += PRICES.RACKET * rackets;

      return total;
    }

    // √ÅR FRISS√çT√âS
    function updatePrice() {
      const price = calculatePrice();
      document.getElementById('total-price').textContent = `${price.toLocaleString('hu-HU')} Ft`;
    }

    // ESEM√âNYLEFIGYEL≈êK
    document.getElementById('hours').addEventListener('input', (e) => {
      document.getElementById('hours-display').textContent = e.target.value;
      updatePrice();
    });

    document.getElementById('with-coach').addEventListener('change', updatePrice);
    document.getElementById('rackets').addEventListener('change', updatePrice);

    // FOGLAL√ÅS K√úLD√âSE
    document.getElementById('booking-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const startTime = document.getElementById('start-time').value;
      const hours = parseInt(document.getElementById('hours').value);
      const withCoach = document.getElementById('with-coach').checked;
      const rackets = parseInt(document.getElementById('rackets').value);
      const notes = document.getElementById('notes').value;
      const totalPrice = calculatePrice();

      // VALID√ÅCI√ì
      if (!selectedTable) {
        showMessage('‚ùå K√©rlek v√°lassz egy asztalt!', 'error');
        return;
      }

      if (!startTime) {
        showMessage('‚ùå K√©rlek v√°lassz d√°tumot √©s id≈ët!', 'error');
        return;
      }

      // ADATOK NAPL√ìZ√ÅSA (MAJD SUPABASE-BE MEGY)
      const bookingData = {
        table_id: selectedTable,
        name,
        email,
        start_time: startTime,
        duration_hours: hours,
        with_coach: withCoach,
        racket_count: rackets,
        notes,
        total_price: totalPrice,
        created_at: new Date().toISOString()
      };

      console.log('üìù FOGLAL√ÅS ADATOK:', bookingData);

      // SIKER √úZENET
      showMessage(`‚úÖ Foglal√°s sikeres!\n\n√ñsszeg: ${totalPrice.toLocaleString('hu-HU')} Ft\nVisszaigazol√°s √©rkezik az e-mailre: ${email}`, 'success');

      // FORM RESETEL√âS
      setTimeout(() => {
        document.getElementById('booking-form').reset();
        selectedTable = null;
        document.querySelectorAll('.table-btn').forEach(b => {
          b.classList.remove('selected');
        });
        updatePrice();
      }, 2000);
    });

    // √úZENET MEGJELEN√çT√âS
    function showMessage(text, type) {
      const msg = document.getElementById('message');
      msg.textContent = text;
      msg.className = type === 'success' 
        ? 'bg-green-100 text-green-900 border border-green-300' 
        : 'bg-red-100 text-red-900 border border-red-300';
      msg.classList.remove('hidden');
      
      if (type === 'success') {
        setTimeout(() => msg.classList.add('hidden'), 5000);
      }
    }

    // INIT
    initTables();
    updatePrice();

    console.log('üéâ PEAC Asztalitenisz Foglal√°si Rendszer - Bet√∂ltve!');
  </script>
</body>
</html>
